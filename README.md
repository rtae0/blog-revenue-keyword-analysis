# ğŸ”® ìˆ˜ìµí˜• ë¸”ë¡œê·¸ë¥¼ ìœ„í•œ í‚¤ì›Œë“œ ë¶„ì„

## ëª©ì°¨
1. [ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ğŸ–ï¸ ì‚¬ìš© ë°©ë²•](#%EF%B8%8F-ì‚¬ìš©-ë°©ë²•)
3. [ğŸ› ï¸ ì£¼ìš” ê¸°ëŠ¥](#%EF%B8%8F-ì£¼ìš”-ê¸°ëŠ¥)
    1. [ğŸ“ ë°ì´í„° ìˆ˜ì§‘](#-ë°ì´í„°-ìˆ˜ì§‘)
       * [í‚¤ì›Œë“œ ë°ì´í„° ìˆ˜ì§‘](#í‚¤ì›Œë“œ-ë°ì´í„°-ìˆ˜ì§‘)
       * [ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘](#í‚¤ì›Œë“œ-ë°ì´í„°-ìˆ˜ì§‘)
    2. [ğŸ‘€ ë°ì´í„° ì „ì²˜ë¦¬ ë° ì‹œê°í™”](#-ë°ì´í„°-ì „ì²˜ë¦¬-ë°-ì‹œê°í™”)
       * [ë°ì´í„° í•„í„°ë§ ë° ì •ë¦¬](#ë°ì´í„°-í•„í„°ë§-ë°-ì •ë¦¬)
       * [ë°ì´í„° ì‹œê°í™” ë° ë¶„ì„](#ë°ì´í„°-ì‹œê°í™”-ë°-ë¶„ì„)
       * [ì„ í˜• íšŒê·€ ëª¨ë¸ í›ˆë ¨ ë° ë¯¸ë˜ 1ë…„ë’¤ ì˜ˆì¸¡](#ì„ í˜•-íšŒê·€-ëª¨ë¸-í›ˆë ¨-ë°-ë¯¸ë˜-1ë…„ë’¤-ì˜ˆì¸¡)
       * [ì‹œê°í™” ê²°ê³¼ ì´ë¯¸ì§€ ì‚½ì…](#ì‹œê°í™”-ê²°ê³¼-ì´ë¯¸ì§€-ì‚½ì…)
4. [ğŸ“‹ ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬](#-ì‚¬ìš©-ë¼ì´ë¸ŒëŸ¬ë¦¬)
      
---

## ğŸ“Œ í”„ë¡œì íŠ¸ ê°œìš”
ì´ í”„ë¡œì íŠ¸ëŠ” êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ìˆ˜ìµí˜• ë¸”ë¡œê·¸ ìš´ì˜ìë“¤ì„ ìœ„í•œ í‚¤ì›Œë“œ ë¶„ì„ ë„êµ¬ì…ë‹ˆë‹¤.ì£¼ì œë³„ë¡œ ìˆ˜ìµì„± ë†’ì€ í‚¤ì›Œë“œë¥¼ ì‹ë³„í•˜ê³ , ë¸”ë¡œê·¸ ì½˜í…ì¸ ì™€ ê´‘ê³ ì˜ ë§¤ì¹­ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•˜ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤.


## ğŸ–ï¸ ì‚¬ìš© ë°©ë²•
* **API ì¸ì¦ ì •ë³´ ì„¤ì •** : api_credentials.py íŒŒì¼ì— ë„¤ì´ë²„ ê²€ìƒ‰ APIì™€ ê´‘ê³  APIì˜ ì¸ì¦ ì •ë³´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
* **í‚¤ì›Œë“œ ì…ë ¥** : ì‚¬ìš©ìê°€ ë¶„ì„í•˜ê³ ì í•˜ëŠ” í‚¤ì›Œë“œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
* **ë°ì´í„° ìˆ˜ì§‘ ë° ë¶„ì„ ì‹¤í–‰** : ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤.
* **ê²°ê³¼ í™•ì¸** : result.xlsx íŒŒì¼ì„ í†µí•´ ë¶„ì„ ê²°ê³¼ì™€ ì‹œê°í™”ëœ ë°ì´í„°ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.


## ğŸ› ï¸ ì£¼ìš” ê¸°ëŠ¥
* **í‚¤ì›Œë“œ ë°ì´í„° ìˆ˜ì§‘** : ë„¤ì´ë²„ ê²€ìƒ‰ APIì™€ ê´‘ê³  APIë¥¼ ì‚¬ìš©í•˜ì—¬ í‚¤ì›Œë“œ ê´€ë ¨ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* **ë°ì´í„° ì „ì²˜ë¦¬** : ì›”ê°„ ê²€ìƒ‰ìˆ˜ê°€ 200ê±´ ì´ìƒì¸ í‚¤ì›Œë“œë¥¼ í•„í„°ë§í•˜ê³ , í•„ìš”í•œ ì •ë³´ë§Œì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
* **ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘** : ê° í‚¤ì›Œë“œì— ëŒ€í•œ ì „ì²´ ë¬¸ì„œ ìˆ˜, ì—°ê´€ ê²€ìƒ‰ì–´, ì›”ë³„ ê²€ìƒ‰ ë¹„ìœ¨, ë¸”ë¡œê·¸ ë§í¬ ë“±ì„ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
* **ê²½ìŸ-ê²€ìƒ‰ ê· í˜• ì§€ìˆ˜ ê³„ì‚°** : ê° í‚¤ì›Œë“œì˜ ìˆ˜ìµì„±ì„ í‰ê°€í•˜ê¸° ìœ„í•œ ì§€í‘œë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
* **ì‹œê°í™” ë° ì‹œê³„ì—´ ë¶„ì„** : í‚¤ì›Œë“œì˜ ì›”ë³„ ê²€ìƒ‰ ì¶”ì´ë¥¼ ì‹œê°í™”í•˜ê³ , ë¯¸ë˜ ê²€ìƒ‰ ë¹„ìœ¨ì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.
* **ì—‘ì…€ íŒŒì¼ë¡œ ê²°ê³¼ ì¶œë ¥** : ë¶„ì„ ê²°ê³¼ë¥¼ ì—‘ì…€ íŒŒì¼ë¡œ ì €ì¥í•˜ê³ , ì‹œê°í™”ëœ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.


## ğŸ“ ë°ì´í„° ìˆ˜ì§‘
### í‚¤ì›Œë“œ ë°ì´í„° ìˆ˜ì§‘
```
resultdf = get_results(hintKeywords)
```
- get_results í•¨ìˆ˜ëŠ” ë„¤ì´ë²„ ê²€ìƒ‰ ê´‘ê³  APIë¥¼ í˜¸ì¶œí•˜ì—¬ í‚¤ì›Œë“œ ê´€ë ¨ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ì‚¬ìš©ìê°€ ì…ë ¥í•œ hintKeywordsë¥¼ ë°›ì•„ í•´ë‹¹ í‚¤ì›Œë“œì™€ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ì •ë³´(ì˜ˆ: ì›”ê°„ ê²€ìƒ‰ìˆ˜, í´ë¦­ë¥ )ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•˜ê³ , ì´ë¥¼ íŒë‹¤ìŠ¤ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ resultdfì— ì €ì¥í•©ë‹ˆë‹¤.


### ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘
```
total_docs = get_total_documents(keyword)
suggest_keyword = get_google_suggestions(keyword)
```
- get_total_documents í•¨ìˆ˜ëŠ” ë„¤ì´ë²„ ê²€ìƒ‰ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ì–´ì§„ í‚¤ì›Œë“œì— ëŒ€í•œ ì „ì²´ ë¬¸ì„œ ìˆ˜ë¥¼ ê²€ìƒ‰í•˜ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ëŠ” ê²½ìŸë¥ ì„ í‰ê°€í•˜ëŠ” ë° ì¤‘ìš”í•œ ì§€í‘œì…ë‹ˆë‹¤.
- get_google_suggestions í•¨ìˆ˜ëŠ” Googleì˜ ìë™ ì™„ì„± APIë¥¼ í˜¸ì¶œí•˜ì—¬ ì£¼ì–´ì§„ í‚¤ì›Œë“œì— ëŒ€í•œ ê´€ë ¨ ê²€ìƒ‰ì–´ ëª©ë¡ì„ ìˆ˜ì§‘í•©ë‹ˆë‹¤. ì´ ì •ë³´ëŠ” ì‚¬ìš©ìê°€ ì½˜í…ì¸  ê³„íšì„ ìˆ˜ë¦½í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.



## ğŸ‘€ ë°ì´í„° ì „ì²˜ë¦¬ ë° ì‹œê°í™”
### ë°ì´í„° í•„í„°ë§ ë° ì •ë¦¬
```
resultdf = resultdf[resultdf['relKeyword'].str.contains(hintKeywords)]
resultdf = resultdf[(resultdf['monthlyPcQcCnt'] + resultdf['monthlyMobileQcCnt']).fillna(0) >= 200]
```
- ìˆ˜ì§‘ëœ ë°ì´í„° ì¤‘ í‚¤ì›Œë“œê°€ í¬í•¨ëœ í•­ëª©ë§Œ í•„í„°ë§í•˜ê³ , ì›”ê°„ ê²€ìƒ‰ìˆ˜ê°€ 200ê±´ ì´ìƒì¸ í–‰ë§Œ ìœ ì§€í•©ë‹ˆë‹¤.



### ê²½ìŸ-ê²€ìƒ‰ ê· í˜• ì§€ìˆ˜ ê³„ì‚°
```
resultdf['ê²½ìŸ-ê²€ìƒ‰ ê· í˜• ì§€ìˆ˜'] = (resultdf['ì›”ê°„ê²€ìƒ‰ìˆ˜(PC)'] + resultdf['ì›”ê°„ê²€ìƒ‰ìˆ˜(ëª¨ë°”ì¼)']) / (resultdf['ê²½ìŸì •ë„_ratio'] + 1)
resultdf = resultdf.sort_values(by='ê²½ìŸ-ê²€ìƒ‰ ê· í˜• ì§€ìˆ˜', ascending=False)
```
* ê° í‚¤ì›Œë“œì˜ ê²½ìŸ-ê²€ìƒ‰ ê· í˜• ì§€ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
* ê³„ì‚°ëœ ì§€ìˆ˜ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°í”„ë ˆì„ì„ ì •ë ¬í•˜ì—¬, ê°€ì¥ ìˆ˜ìµì„±ì´ ë†’ì€ í‚¤ì›Œë“œë¥¼ ì‰½ê²Œ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
* ì´ëŸ¬í•œ ë¶„ì„ ê³¼ì •ì€ ì‚¬ìš©ìê°€ íš¨ê³¼ì ì¸ í‚¤ì›Œë“œë¥¼ ì„ ì •í•˜ê³ , ìµœì ì˜ ì½˜í…ì¸  ì „ëµì„ ìˆ˜ë¦½í•˜ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.



### ë°ì´í„° ì‹œê°í™” ë° ë¶„ì„
```
for index, item in enumerate(cell_data):
    # JSON ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜
    results_data = json.loads(item)['results'][0]['data']
    title = json.loads(item)['results'][0]['title']
    periods = [datetime.strptime(d['period'], "%Y-%m-%d") for d in results_data]
    ratios = [d['ratio'] for d in results_data]
    df = pd.DataFrame({'Date': periods, 'Ratio': ratios})

    # ë°ì´í„° ì‹œê°í™”
    fig, ax = plt.subplots(figsize=(15, 5))
    colors = ['red', 'green', 'blue', 'cyan', 'magenta', 'yellow', 'black', 'orange']
    years = df['Date'].dt.year.unique()
    for i, year in enumerate(years):
        year_data = df[df['Date'].dt.year == year]
        ax.plot(year_data['Date'], year_data['Ratio'], label=f'{year}ë…„ë„', color=colors[i % len(colors)])
    
    # ê·¸ë˜í”„ ì œëª© ì„¤ì • ë° ë²”ë¡€ ì¶”ê°€
    ax.set_title(title + 'ì— ëŒ€í•œ ê²€ìƒ‰ ê´€ì‹¬ë„ ì¶”ì´')
    ax.legend(loc='upper left')

    plt.tight_layout()
    plt.savefig(f'{index}.png')
    plt.show()

```
* enumerate(cell_data)ë¥¼ í†µí•´ ê° í‚¤ì›Œë“œì— ëŒ€í•œ ì›”ë³„ ê²€ìƒ‰ ë°ì´í„°(cell_data)ë¥¼ ìˆœíšŒí•©ë‹ˆë‹¤.
* JSON í˜•ì‹ì˜ ë°ì´í„°ë¥¼ íŒŒì‹±í•˜ì—¬ ê° í‚¤ì›Œë“œì— ëŒ€í•œ ê²€ìƒ‰ ë¹„ìœ¨(ratio)ê³¼ í•´ë‹¹ ê¸°ê°„(period)ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
* ì¶”ì¶œëœ ë°ì´í„°ë¥¼ íŒë‹¤ìŠ¤ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‹œê³„ì—´ ë°ì´í„°ë¡œ ì¤€ë¹„í•©ë‹ˆë‹¤.
* matplotlibë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì—°ë„ë³„ë¡œ ê²€ìƒ‰ ë¹„ìœ¨ì„ ë‹¤ë¥¸ ìƒ‰ìƒì˜ ì„ ìœ¼ë¡œ ê·¸ë˜í”„ì— í‘œì‹œí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œê°„ì— ë”°ë¥¸ ê²€ìƒ‰ ì¶”ì´ë¥¼ ëª…í™•í•˜ê²Œ ì‹œê°í™”í•©ë‹ˆë‹¤.
* ìµœì¢…ì ìœ¼ë¡œ ìƒì„±ëœ ê·¸ë˜í”„ëŠ” .png í˜•ì‹ì˜ ì´ë¯¸ì§€ íŒŒì¼ë¡œ ì €ì¥ë˜ê³  í™”ë©´ì— í‘œì‹œë©ë‹ˆë‹¤.
<img width="100%" alt="image" src="https://github.com/rtae0/blog-revenue-keyword-analysis/assets/69848839/2f792558-3087-46a6-86be-b1ed5c5f3c39">



### ì„ í˜• íšŒê·€ ëª¨ë¸ í›ˆë ¨ ë° ë¯¸ë˜ 1ë…„ë’¤ ì˜ˆì¸¡
```
df['DateInt'] = df['Date'].apply(lambda x: x.toordinal())
model = LinearRegression()
model.fit(df[['DateInt']], df['Ratio'])

last_date = df['Date'].iloc[-1]
future_dates = [last_date + timedelta(days=x) for x in range(1, 365)]
future_date_int = [d.toordinal() for d in future_dates]
future_df = pd.DataFrame({'DateInt': future_date_int})
future_predictions = model.predict(future_df)
```
* LinearRegression ëª¨ë¸ì„ í›ˆë ¨ì‹œì¼œ, ê¸°ì¡´ ë°ì´í„°ì— ê¸°ë°˜í•œ ë¯¸ë˜ ê²€ìƒ‰ ë¹„ìœ¨ì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.
* ë§ˆì§€ë§‰ ë‚ ì§œë¶€í„° ë¯¸ë˜ 1ë…„ê°„ì˜ ë‚ ì§œë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ëª¨ë¸ì— ì ìš©í•˜ì—¬ ë¯¸ë˜ ê²€ìƒ‰ ë¹„ìœ¨ì„ ì˜ˆì¸¡í•©ë‹ˆë‹¤.
* ì´ ì˜ˆì¸¡ ëª¨ë¸ì€ ë¸”ë¡œê·¸ ìš´ì˜ìë“¤ì´ ë¯¸ë˜ì˜ ê²€ìƒ‰ íŠ¸ë Œë“œë¥¼ ì´í•´í•˜ê³  ì ì ˆí•œ ì½˜í…ì¸  ê³„íšì„ ì„¸ìš°ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.



### ì‹œê°í™” ê²°ê³¼ ì´ë¯¸ì§€ ì‚½ì…
```
for index in range(1, ws.max_row):
    img = Image(img_path)
    ws.add_image(img, f"J{index + 1}")
```
* ê° í‚¤ì›Œë“œë³„ë¡œ ìƒì„±ëœ ì‹œê°í™” ê·¸ë˜í”„ ì´ë¯¸ì§€(.png íŒŒì¼)ë¥¼ ì—‘ì…€ íŒŒì¼ì˜ ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ì…í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
* Image(img_path)ëŠ” ì €ì¥ëœ ê·¸ë˜í”„ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê³ , ws.add_image(img, f"J{index + 1}")ëŠ” í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ì—‘ì…€ ì‹œíŠ¸ì˜ ì§€ì •ëœ ì…€ ìœ„ì¹˜(J ì—´)ì— ì¶”ê°€í•©ë‹ˆë‹¤.


## ğŸ“‹ ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬
```
pandas
matplotlib
requests
openpyxl
urllib
hashlib
datetime
```
